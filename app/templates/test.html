{% extends "layout.html" %}
{% block content %}
<script type="text/javascript">
{% for i in pack %}
$(document).ready(function(){
    $("input#{{pack.index(i)}}").click(function(){
      $.getJSON($SCRIPT_ROOT + '/_getxml', {
      xml: $("input#{{ pack.index(i) }}").attr("name")
      }, function(data){
        var code = data.xml;
        editor.setValue(code);
        editor.gotoLine(1);
        $("#dossier").html('{{ i }}');
      });
    });
  });
{% endfor %}
</script>

<div class="jumbo">
    <div id="block"></div>
    <div id="lien">&#128279;</div>
    <div id="lien2">&#58541;</div>
    <div id="results">1) Sélectionner le groupe<br>
                        2) Cocher les logiciels à installer<br>
                        3) Confirmer les changements<br>
                        <label class="appliquer"><span class="icon">&#128229;</span>Appliquer</label></div>
    <div id="groupe">
    <div class="groupeicon">&#128101;</div><span class="texticon">GRP</span>
    <select multiple="multiple" size="25" id="Listegrp">
        {% for grp in grps %}
        <option value="{{ grp }}" name="{{ grp }}">{{ grp }}</option>
        {% endfor %}
    </select>
    </div>


    <div id="supp">
        <div class="installedicon">&#128193;</div><span class="texticon">Logiciels installés</span>
        <div id="installed">
        <table id="Table2" class="tablesorter">
            <thead>
                <tr>
                    <th>Noms</th>
                </tr> 
            </thead>
            <tbody id="installed2">
            </tbody>
        </table>
        
    </div>
    <label class="boutonsupp"><span class="icon">&#8854;</span>Supprimer</label>
    </div>
    <div id="add"><div class="addicon">&#59392;</div><span class="texticon">Logiciels</span>
    <div id="logiciels">
        <table id="myTable" class="tablesorter">
            <thead>
                <tr>
                    <th>Noms</th>
                </tr>
            </thead>
            <tbody>
                {% for shortname in packs %}
                <tr>
                    <td id="nomlogiciel{{ packs.index(shortname) }}" class="nomlogiciel"><label><input type="checkbox" id="{{ shortname }}" ><span> {{ shortname }}</span></label><input type="button" class="boutonedit" id="{{ packs.index(shortname) }}" name="packages/{{ shortname }}.xml" value="XML" ></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <label class="boutonadd"><span class="icon">&oplus;</span>Ajouter</label>
    </div>

    <div id="vuediteur">
        <label id="radioedit">Afficher éditeur</label>
        <label id="radioedit2">Masquer éditeur</label>
    </div>
    
    <div id="editeur">
        <div id="dossier"></div>
        <div id="editor" name="editor" >--> Editeur XML : cliquez sur le bouton " Editer " correspondant au logiciel que vous voulez modifier</div>
        <input id="save" class="boutonsave"  type="submit" value="Enregistrer">
    </div>

    <div id="loader"><img src="{{ url_for('static', filename='img/ajax-loader.gif') }}"></div>


    <script src="http://rawgithub.com/ajaxorg/ace-builds/master/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/chrome");
        editor.getSession().setMode("ace/mode/xml");
    </script>
    <script type="text/javascript">
            var oui = document.getElementById("radioedit");
            var non = document.getElementById("radioedit2");
            var editeur = document.getElementById("editeur");
            oui.onclick = function() {
                oui.style.display = "none";
                editeur.style.display = "block";
                non.style.display = "block";
            };
            non.onclick = function() {
                non.style.display = "none";
                editeur.style.display = "none";
                oui.style.display = "block";
            };
            </script>

</div>

{% endblock %}
